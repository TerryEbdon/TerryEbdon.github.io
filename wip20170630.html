<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Developer&#39;s Diary: BitBucket tabs, Dates, Eclipse &amp; licences</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="myStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="terry_avi.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Developer&#39;s Diary
   </div>
   <div id="projectbrief">Software development, with Terry Ebdon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('wip20170630.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">BitBucket tabs, Dates, Eclipse &amp; licences </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md74">Date bug</a></li>
<li class="level1"><a href="#autotoc_md75">Internationalisation (i18n)</a></li>
<li class="level1"><a href="#autotoc_md76">Licensing</a></li>
<li class="level1"><a href="#autotoc_md77">BitBucket</a></li>
<li class="level1"><a href="#autotoc_md78">Interesting web pages</a><ul><li class="level2"><a href="#autotoc_md79">Installers</a></li>
<li class="level2"><a href="#autotoc_md80">Licensing</a><ul><li class="level3"><a href="#autotoc_md81">Open Source Licences</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md82">Eclipse</a></li>
<li class="level2"><a href="#autotoc_md83">i18n</a></li>
<li class="level2"><a href="#autotoc_md84">Java Resource Bundles</a></li>
<li class="level2"><a href="#autotoc_md85">Maven</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="h20170630"></a><em>Friday 30<sup>th</sup> June, 2017</em></p>
<h1><a class="anchor" id="autotoc_md74"></a>
Date bug</h1>
<p>There was a bug in my <code>dayNumberSuffix</code> method; see if you can spot it: </p><div class="fragment"><div class="line">def dayNumberSuffix( <span class="keyword">final</span> Date d ) {</div>
<div class="line">    <span class="keywordflow">switch</span> ( d.date ) {</div>
<div class="line">        <span class="keywordflow">case</span> [1,21,31]:     <span class="stringliteral">&quot;st&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span> [2,22]:        <span class="stringliteral">&quot;nd&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span> [3,23]:        <span class="stringliteral">&quot;rd&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span> 4..9:          <span class="stringliteral">&quot;th&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span> 24..29:        <span class="stringliteral">&quot;th&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">default</span>: <span class="stringliteral">&#39;Huh?&#39;</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Today's page template had a header claiming the date was "30<sup>Huh?</sup> June". That's not right! So there are <a href="https://bitbucket.org/terry_ebdon/webdoxy/issues/2/daily-page-for-the-30th-has-suffix-of-huh" title="Bug #2 in issue tracker">two bugs:</a></p>
<ol type="1">
<li>It should be the 30<sup>th</sup> and</li>
<li>It should have thrown an exception:</li>
</ol>
<div class="fragment"><div class="line">def dayNumberSuffix( <span class="keyword">final</span> Date d ) {</div>
<div class="line">    <span class="keywordflow">switch</span> ( d.date ) {</div>
<div class="line">        <span class="keywordflow">case</span> [1,21,31]: <span class="stringliteral">&quot;st&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span>    [2,22]: <span class="stringliteral">&quot;nd&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span>    [3,23]: <span class="stringliteral">&quot;rd&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">case</span>     4..30: <span class="stringliteral">&quot;th&quot;</span>; <span class="keywordflow">break</span></div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            project.ant.fail <span class="stringliteral">&quot;Unexpected day No. ${d.date}&quot;</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You might find it a bit odd that I'm using Ant to throw the exception. Currently the project logs everything via <code>ant.echo()</code> and <code>ant.fail()</code>. That's because I haven't, yet, incorporated a logging framework. The nice thing with Ant is that I can wire it up to my app's logger, using a listener. So if I add, say, Log4J I don't need to re-write all the existing message code. Plus my log file will then include all the messages that ant itself logs, correctly interleaved and formatted to my standard.</p>
<h1><a class="anchor" id="autotoc_md75"></a>
Internationalisation (i18n)</h1>
<p>It's time to get a grip on i18n before the project gets too big. This is usually something that, like logging, I'd deal with up front. But this project started as a simple build script, for personal use. Now that it's started to grow, and I've decided to share the code on BitBucket, I need to tidy it up. Java resource bundles are the obvious choice. I can start with properties files and know that I can move the messages into a database, at a later date, with a minor code change. I don't plan to use a DB, but it's good to know that my i18n framework will not cause problems if I do.</p>
<h1><a class="anchor" id="autotoc_md76"></a>
Licensing</h1>
<p>If I'm making the code public I'll need a licence. I decided on the Apache 2.0 licence. This is a permissive licence that doesn't have the viral infection issues of GPL. I've pasted a header into every code module and updated the Mercurial repository. Eclipse has a useful comment template system, that will add standard templates to new modules, methods etc. So every class file I add will get a standard header, with the current year in the copyright notice and the correct date in the GroovyDoc / JavaDoc @date command.</p>
<h1><a class="anchor" id="autotoc_md77"></a>
BitBucket</h1>
<p>Viewing the code on BitBucket is a little odd, it's too spaced-out. It's displayed using a tab stop every eight characters, whereas I prefer tabs every four characters. I assumed there'd be a way to configure this, but no. There is a work-around... you have to manually append <code>&amp;ts=4</code> to the URL, as described in Chris Wareham's comment on BitBucket <a href="https://bitbucket.org/site/master/issues/11111/configurable-tab-size-setting-bb-12390">issue #11111</a>.</p>
<h1><a class="anchor" id="autotoc_md78"></a>
Interesting web pages</h1>
<h2><a class="anchor" id="autotoc_md79"></a>
Installers</h2>
<ul>
<li><a href="http://www.jrsoftware.org/isinfo.php">Inno Setup</a> &ndash; Jordan Russell's Software.</li>
</ul>
<h2><a class="anchor" id="autotoc_md80"></a>
Licensing</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/204676/how-to-manage-license-banners-in-source-files-of-eclipse-plug-in-projects">How to manage license banners in source files of Eclipse plug-in projects</a> &ndash; stack overflow</li>
<li><a href="https://stackoverflow.com/questions/13436609/how-should-i-add-licence-information-to-maven-project-and-its-source-files">How should I add licence information to maven project and its source files</a> &ndash; stack overflow</li>
</ul>
<h3><a class="anchor" id="autotoc_md81"></a>
Open Source Licences</h3>
<ul>
<li><a href="https://help.github.com/articles/licensing-a-repository/">Licensing a repository</a> &ndash; GitHub help</li>
<li><a href="https://softwareengineering.stackexchange.com/questions/56927/what-are-the-real-life-implications-for-an-apache-2-license">What are the real life implications for an Apache 2 license?</a> &ndash; Software Engineering Stack Exchange</li>
<li><a href="https://softwareengineering.stackexchange.com/questions/284773/what-to-keep-in-mind-when-releasing-an-app-which-uses-libraries-licensed-under-t">What to keep in mind when releasing an app which uses libraries licensed under the Apache 2.0 License?</a> &ndash; Software Engineering Stack Exchange</li>
<li><a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License Version 2.0</a> &ndash; Apache Software Foundation, January 2004</li>
</ul>
<h2><a class="anchor" id="autotoc_md82"></a>
Eclipse</h2>
<ul>
<li><a href="http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcpathvars.htm">Path variables</a> &ndash; Eclipse documentation - Archived Release, Eclipse Luna</li>
</ul>
<h2><a class="anchor" id="autotoc_md83"></a>
i18n</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/13763700/java-string-format-numbers-with-localization">java String.format: numbers with localization</a> &ndash; stack overflow. &dagger;</li>
<li><a href="https://stackoverflow.com/questions/1365419/managing-the-localization-of-java-properties-files">Managing the localization of Java properties files</a> &ndash; stack overflow.</li>
<li><a href="http://www.zaval.org/products/jrc-editor/">Zaval Java Resource Editor (JRC-Editor)</a> Zaval creative engineering group.</li>
<li><a href="http://www.zaval.org/products/jrc-editor/user_guide/index.html">Zaval JRC Editor Version 2.0 User's Guide</a> &ndash; Zaval creative engineering group.</li>
<li><a href="https://docs.oracle.com/javase/tutorial/i18n/format/messageFormat.html">Dealing with Compound Messages</a> &ndash; Oracle Java SE Tutorial. &dagger;</li>
</ul>
<h2><a class="anchor" id="autotoc_md84"></a>
Java Resource Bundles</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/2344483/where-does-resourcebundle-getbundleresourcefile-new-localeus-us-look">Where does ResourceBundle.getBundle(“ResourceFile”, new Locale(“us”, “US”)) look for the file?</a> &ndash; stack overflow</li>
<li><a href="https://stackoverflow.com/questions/20348657/cannot-load-properties-file-from-resources-directory">Cannot load properties file from resources directory</a> &ndash; stack overflow</li>
<li><a href="https://stackoverflow.com/questions/1172424/how-to-load-a-resource-bundle-from-a-file-resource-in-java">How to load a resource bundle from a file resource in Java?</a> &ndash; stack overflow.</li>
<li><a href="http://tutorials.jenkov.com/java-internationalization/resourcebundle.html">Java ResourceBundle</a> &ndash; Jakob Jenkov, Last update: 2014-06-23</li>
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html">Class ResourceBundle</a> &ndash; Java 7 SE API.</li>
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/util/MissingResourceException.html">Class MissingResourceException</a> &ndash; Java 7 SE API.</li>
</ul>
<h2><a class="anchor" id="autotoc_md85"></a>
Maven</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/5527100/why-does-maven-not-copy-the-properties-files-during-the-build-process">Why does maven not copy the properties files during the build process?</a> &ndash; stack overflow</li>
<li><a href="https://maven.apache.org/apache-resource-bundles/">Apache Resource Bundles</a>&ndash; Apache Maven Project</li>
<li><a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">Introduction to the Standard Directory Layout</a> &ndash; Apache Maven Project</li>
</ul>
<p> 
<hr/>
<a class='btn' href='wip20170629.html'>29<sup>th</sup> June 👈</a>
<a class='btn' href='#h20170630'>Top of page</a>
<a class='btn' href='wip20170701.html'>👉 1<sup>st</sup> July</a>
 <span class="copyright">&copy; 2017 <a href="AboutMe.html" title="Terry Ebdon">Terry Ebdon.</a></span><br  />
<p>Find me coding on <a title="terry_ebdon on BitBucket"
href="https://github.com/TerryEbdon">GitHub,</a> networking on <a
title="Terry Ebdon on LinkedIn"
href="https://www.linkedin.com/in/talent/">LinkedIn</a> and hanging out on <a
title="@terry_ebdon" href="https://twitter.com/@terry_ebdon">twitter.</a> </p>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jul 20 2020 15:56:10 for Developer&#39;s Diary by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
