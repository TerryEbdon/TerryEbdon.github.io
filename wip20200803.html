<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-174219699-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-174219699-1');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Developer&#39;s Diary: 03-Aug-2020 CLI sorting</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="myStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="terry_avi.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Developer&#39;s Diary
   </div>
   <div id="projectbrief">Software development, with Terry Ebdon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('wip20200803.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">03-Aug-2020 CLI sorting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#h20200803">Sorting from the command line</a></li>
<li class="level1"><a href="#autotoc_md312">Sort limitations</a><ul><li class="level2"><a href="#autotoc_md313">Windows sort</a><ul><li class="level3"><a href="#autotoc_md314">Limitations</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md315">GNU &amp; POSIX sorts</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="h20200803"></a>
Sorting from the command line</h1>
<p>I needed to add a sort step into a Windows command script running on a client system.</p>
<p><div class="plantumlgraph">
<img src="2020-08-03_cli_sort.png" />
</div>
 </p>
<p>The input is a log file that had been pre-filtered by awk, and could be treated as space delimited. The required sort order was ascending by username (field 4) then timestamp (field 1). The safest way to do this is with a stable sort using field 4 as a single key. The stable sort preserves the logged order, within user, even if two log entries have the same timestamp.</p>
<h1><a class="anchor" id="autotoc_md312"></a>
Sort limitations</h1>
<h2><a class="anchor" id="autotoc_md313"></a>
Windows sort</h2>
<p>The Windows utility seems very limited when compared to sort tools I've used in the past. Though it's interesting that this is the first time the command's simplicity has caused me a problem.</p>
<h3><a class="anchor" id="autotoc_md314"></a>
Limitations</h3>
<ol type="1">
<li>It can only sort text files</li>
<li>A single key</li>
<li>You can only give the key position, not its length</li>
<li>Key is specified only by character position</li>
<li>Sort is case insensitive (according to Microsoft, others disagree)</li>
<li>No stable-sort option</li>
</ol>
<p>Point 1 isn't an issue here, but the key limitations, in points 2 and 3, were. I'd also be concerned that there's no option for a stable sort.</p>
<p>I could have worked around this by modifying the awk script, that generates the input file, to include a key field at the start of each line. I didn't consider that as I wanted to avoid changes to working code on a live system.</p>
<h2><a class="anchor" id="autotoc_md315"></a>
GNU &amp; POSIX sorts</h2>
<p>A POSIX compatible sort with a stable-sort extension, e.g. GNU sort, is significantly better, though it still has surprising limitations.</p>
<ol type="1">
<li>Can only sort text files</li>
<li>Sort keys are based on field numbers</li>
</ol>
<p> 
<a class='btn' href='wip20200802.html'>02-AUG-2020 ðŸ‘ˆ</a>
<a class='btn' href='#h20200803'>Top of page</a>
<a class='btn' href='wip20200804.html'>ðŸ‘‰ 04-AUG-2020</a>
</p>
<p><a href="https://ko-fi.com/W7W71ZMVG" target="_blank"><img src="https://cdn.ko-fi.com/cdn/kofi5.png?v=2" alt="Buy Me a Coffee at ko-fi.com" height="36" style="border:0px;height:36px;" border="0" class="inline"/></a><br  />
<span class="copyright">&copy; 2020 <a href="AboutMe.html" title="Terry Ebdon">Terry Ebdon.</a></span><br  />
<p>Find me coding on <a title="terry_ebdon on GitHub"
href="https://github.com/TerryEbdon">GitHub,</a> networking on <a
title="Terry Ebdon on LinkedIn"
href="https://www.linkedin.com/in/talent/">LinkedIn</a>, answering questions on
<a title="terry-ebdon on StackExchange"
href="https://stackexchange.com/users/9183134/terry-ebdon?tab=accounts">
Stack Exchange</a> and hanging out on
<a title="@terry_ebdon" href="https://twitter.com/@terry_ebdon">twitter.</a>
</p>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Aug 9 2020 13:31:44 for Developer&#39;s Diary by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
