<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-174219699-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-174219699-1');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Developer&#39;s Diary: 26-May-2020 Creating weekly pages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="myStyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="terry_avi.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Developer&#39;s Diary
   </div>
   <div id="projectbrief">Software development, with Terry Ebdon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('wip20200526.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">26-May-2020 Creating weekly pages </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="h20200526"></a>
Weekly changes</h1>
<p>I create daily page templates, for this site, using WebDoxy's <code>-j</code> option. I have another site with weekly entries. It would be nice if WebDoxy could create "week per view" template pages for that site as well. That's tricky enough to be interesting. The site has monthly, quarterly and weekly pages with cross links. It also uses <a href="https://www.staff.science.uu.nl/~gent0113/calendar/isocalendar_text_2">ISO 8601</a> week numbers. Java's <code>SimpleDateFormatter</code> can handle week numbers, but not quarters. The <code>java.time.ZonedDateTime</code> class is aware of ISO week numbers and quarters.</p>
<p>The generated markdown for week 18, 2020, will start like this: </p><pre class="fragment"># April / May 2020, week 18 {#y2020w18}
</pre><p>There's the first wrinkle, some weeks are split across two months. It gets better, a week can also be split across two years: </p><pre class="fragment"># December 2020 / January 2021, week 53 {#y2020w53}
</pre><p>The new <code>--week</code> option will need to generate up to a year of weekly pages, determined by the <code>--number</code> option, starting at an arbitrary week, specified with <code>--date</code>, and defaulting to the current week.</p>
<p>The following two commands will create identical pages, if run on May 26, 2020: </p><pre class="fragment">groovy WebDoxy.groovy --week --number 1 --date 2020-05-26
groovy.groovy --week
</pre><p>The first step is to determine the week number, based on the given date. I'll also need dates for first and last days of that week, i.e. the Monday and Sunday. (The ISO standard specifies Monday as the start of the week, as most people would expect.)</p>
<p>This is easy in Groovy, as the Date class is extended to support integer maths:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> java.time.temporal.IsoFields</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="keyword">final</span> Date monday = pageDate - pageDate.</div>
<div class="line">    toZonedDateTime().</div>
<div class="line">    dayOfWeek.value + 1</div>
<div class="line"> </div>
<div class="line"><span class="keyword">final</span> Date sunday = monday + 6</div>
<div class="line"><span class="comment">// ...</span></div>
</div><!-- fragment --><p> 
<a class='btn' href='wip20200524.html'>24-MAY-2020 ðŸ‘ˆ</a>
<a class='btn' href='#h20200526'>Top of page</a>
<a class='btn' href='wip20200527.html'>ðŸ‘‰ 27-MAY-2020</a>
</p>
<p><span class="copyright">&copy; 2020 <a href="AboutMe.html" title="Terry Ebdon">Terry Ebdon.</a></span><br  />
<p>Find me coding on <a title="terry_ebdon on GitHub"
href="https://github.com/TerryEbdon">GitHub,</a> networking on <a
title="Terry Ebdon on LinkedIn"
href="https://www.linkedin.com/in/talent/">LinkedIn</a>, answering questions on
<a title="terry-ebdon on StackExchange"
href="https://stackexchange.com/users/9183134/terry-ebdon?tab=accounts">
Stack Exchange</a> and hanging out on
<a title="@terry_ebdon" href="https://twitter.com/@terry_ebdon">twitter.</a>
</p>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Aug 2 2020 16:17:24 for Developer&#39;s Diary by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
